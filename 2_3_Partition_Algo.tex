\subsection{The Partition Algorithm}
To motivate the partition algorithm, we first define optimal solutions for the recommendation subgraph problem.
 

{\bf Perfect Recommendation Subgraphs:} We define a \emph{perfect} $(c,a)$-recommendation subgraph on $G$ to be a subgraph $H$ such that
$deg_H(u)\leq c$ for all $u\in L$ and $deg_H(v)=a$ for
$\min(r,\lfloor cl/a \rfloor)$ of the vertices in $R$.
 

The reason we define perfect $(c,a)$-recommendation subgraphs is that when one
exists, it's possible to recover it in polynomial time using a min-cost
$b$-matching algorithm (matchings with a specified degree $b$ on each vertex)
for any setting of $a$ and $c$. However, implementations of $b$-matching
algorithms often incur significant overheads even over regular bipartite matchings.
This motivates a solution that uses regular bipartite matching algorithms to find
an approximately optimal solution given that a perfect one exists.  

We do this by proving a sufficient condition for perfect $(c,a)$-recommendation
subgraphs to exist with high probability in a bipartite graph $G$ under the
{\bf Erd\"os-Renyi model}~\cite{ErdosRenyi59} where edges are sampled uniformly and
independently with probability $p$. This argument then guides our formulation of
a heuristic that overlays matchings carefully to obtain $(c,a)$-recommendation
subgraphs.  

\begin{thm}\cite{Janson2011}
\label{random_matching_threshold}
Let $G$ be a bipartite graph drawn from $G_{n, n, p}$. If $p \geq \frac{\log n -
\log\log n}{n}$, then as $n\to\infty$,  the probability that G has a perfect
    matching approaches 1.
\end{thm}

We will prove that a perfect $(c,a)$-recommendation subgraph exists in
random graphs with high probability by building it up from $a$
matchings each of which must exist with high probability if $p$ is
sufficiently high. To find these matchings, we identify subsets of size
$l$ in $R$ that we can perfectly match to $L$. These subsets overlap,
and we choose them so that each vertex in $R$ is in $a$ subsets.
%While the theorem is stated for
%the case when $a \leq c$, it applies equally well to the $a > c$
%case by partitioning $L$ instead of $R$ in the following proof.

\begin{thm}\label{perfect}
Let $G$ be a random graph drawn from $G_{l, r, p}$ with $p\geq a\frac{\log l-\log\log
l}{l}$ then the probability that $G$ has a perfect $(c, a)$-recommendation
subgraph tends to 1 as $l,r\to\infty$.
\end{thm}

This theorem guarantees the existence of an optimal recommendation subgraph in sufficiently dense subgraphs, and provides a constructive proof of this fact that is also the basis of our partition algorithm.  

%\begin{proof}
%We start by either padding or restricting $R$ to a set of $\frac{lc}{a}$ before we
%start our analysis. If $r\geq\frac{lc}{a}$, then we restrict $R$
%to an arbitrary subset $R'$ of size $\frac{lc}{a}$. Since induced subgraphs of
%Erd\"{o}s-Renyi graphs are also Erd\"{o}s-Renyi graphs, we can instead
%apply our analysis to the induced subgraph. Since the optimal
%solution has size bounded above by $\frac{lc}{a}$ a perfect $(c,a)$-recommendation
%subgraph in $G[L,R']$ will imply a perfect recommendation subgraph in $G[L,R]$.  
%
%On the other hand, if $r \leq\frac{lc}{a}$, then we can pad $R$ with $\frac{lc}{a}-r$
%dummy vertices and adding an edge from each such vertex to each vertex in $L$
%with probability $p$. We call the resulting right side of the graph $R'$.
%Note that $G[L,R']$ is still generated by the Erd\"{o}s-Renyi process. Further,
%since the original graph $G[L,R]$ is a subgraph of this new graph, if we prove
%the existence of a perfect $(c,a)$-recommendation subgraph in this new graph, it
%will imply the existence of a perfect recommendation subgraph in $G[L,R]$.  
%
%Having picked an $R'$ satisfying $|R'|=\frac{lc}{a}$, we pick an enumeration
%of the vertices in $R'=\{v_0,\ldots, v_{lc/a-1}\}$
%and add each of these vertices into $a$ subsets as follows. Define
%$R_i = \{v_{(i-1)l/a}, \ldots, v_{(i-1)l/a+l-1}\}$ for each $1\leq i\leq c$ where
%the arithmetic in the indices is done modulo $lc/a$. Note both $L$ and all of
%the $R_i$'s have size $l$.  
%
%Using these new sets we define the graphs $G_i$ on the bipartitions
%$(L, R_i)$. Since the sets $R_i$ are intersecting, we cannot define the
%graphs $G_i$ to be induced subgraphs. However, note that each vertex $v\in R'$
%falls into exactly $a$ of these subsets.  
%
%Therefore, we can uniformly randomly assign each edge in $G$ to one of $a$ graphs among $\{G_1,\ldots, G_c\}$ it can fall into,
%and make each of those graphs a random graph. In fact, while the different
%$G_i$ are coupled, taken in isolation we can consider any single $G_i$ to be
%drawn from the distribution $G_{l,l,p/a}$ since $G$ was drawn from $G_{l,r,p}$.
%Since $p/a \geq (\log l - \log\log l)/l$ by assumption, we conclude by
%Theorem~\ref{random_matching_threshold}, the probability that a particular
%$G_i$ has no perfect matching is $o(1)$.  
%
%If we fix $c$, we can conclude by a union bound that except
%for a $o(1)$ probability, each one of the $G_i$'s has a perfect matching. By
%superimposing all of these perfect matchings, we can see that every vertex in
%$R'$ has degree $a$. Since each vertex in $L$ is in exactly $c$ matchings, each
%vertex in $L$ has degree $c$. It follows that except for a $o(1)$ probability
%there exists a $(c,a)$-recommendation subgraph in $G$.
%\end{proof}

{\bf Approximation Algorithm Using Perfect Matchings:}
The above result now enables us to design a near linear time
algorithm with a $(1-\epsilon)$ approximation guarantee
to the $(c,a)$-recommendation subgraph problem by leveraging
combinatorial properties of matchings. In particular, we use
the fact a matching that does not have augmenting paths of
length $>2\alpha$ is a $1-1/\alpha$ approximation to the maximum
matching problem. We call this method the Partition Algorithm,
and we outline it below.

\begin{algorithm}[h]\label{partition_alg}
  \SetAlgoLined
  \KwData{A bipartite graph $G=(L,R,E)$}
  \KwResult{A (c,a)-recommendation subgraph $H$}
  $R' \leftarrow$ a random sample of $|L|c/a$ vertices from $R$\;
%Arda: In light of above comments. I am not sure you need to define R'
  Choose $G[L,R_1],\ldots,G[L,R_c]$ as in Theorem \ref{perfect}\;
  \For{$i$ in [1..n]} {
    $M_i \leftarrow$ A matching of $G[L,R_i]$ with no augmenting path of length $2c/\epsilon$\;
  }
  $H \leftarrow M_1\bigcup\ldots \bigcup M_c$\;
  \Return $H$\;
  \caption{The partition algorithm}
\end{algorithm}
\vspace{-.2cm}

\begin{thm}
Let $G$ be drawn from $G_{l,r,p}$ where $p \geq a\frac{\log l - \log\log l}{l}$.
Then Algorithm 3 finds a $(1-\epsilon)$-approximation
in $O(\frac{|E|}{\epsilon})$ time with probability $1-o(1)$.
\end{thm}
%\begin{proof}
%Using the previous theorem, we know that each of the graphs $G_i$ has a
%perfect matching with high probability. These perfect matchings
%can be approximated to a $1-\epsilon/c$ factor by finding matchings
%that do not have augmenting paths of length $\geq 2c/\epsilon$
%~\cite{LovaszPlummer1986}. This can be done for each $G_i$ in
%$O(|E|c/\epsilon)$ time. Furthermore, the union of unmatched vertices
%makes up an at most $c(\epsilon/c)$ fraction of $R'$, which proves the claim.
%\end{proof}

Notice that if we were to run the augmenting paths algorithm to completeness
for each matching $M_i$, then this algorithm would take $O(|E||L|)$ time. We
could reduce this further to $O(|E|\sqrt{L})$ by using Hopcroft-Karp.
\cite{HopcroftKarp}  

Assuming
a sparse graph where $|E|=\Theta(|L|\log|L|)$, the time complexity of this algorithm is $\Theta(|L|^{3/2}\log|L|)$.  The space complexity
is only $\Theta(|E|) = \Theta(|L|\log|L|)$, but a large constant is hidden by
the big-Oh notation that makes this algorithm impractical in real test cases. 